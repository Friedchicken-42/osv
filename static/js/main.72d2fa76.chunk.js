(this.webpackJsonposv=this.webpackJsonposv||[]).push([[0],{22:function(e,t,a){},28:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(23),r=a.n(c),i=(a(28),a(8)),u=a(2),o=a.n(u),j=a(4),d=a(0),l=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("input",{name:"beatmap",type:"text",className:"size"})})},m=function(){var e=Object(n.useState)([Object(d.jsx)(l,{},"0")]),t=Object(i.a)(e,2),a=t[0],s=t[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Beatmap link"}),a,Object(d.jsx)("button",{className:"btn",onClick:function(e){return s([].concat(Object(j.a)(a),[Object(d.jsx)(l,{},a.length)]))},children:"+"}),Object(d.jsx)("button",{className:"btn",onClick:function(e){a.length>1&&s(a.slice(0,a.length-1))},children:"-"})]})},b=function(){var e=Object(n.useState)("/osv/avatar-guest.png"),t=Object(i.a)(e,2),a=t[0],s=t[1],c=function(e){""===e?s("/osv/avatar-guest.png"):function(e){return o.a.get("https://osu.ppy.sh/api/get_user",{params:{k:"6e85fdaab213f9622e86be94c75bc3d7b85dfa7b",u:e,type:"string"}}).then((function(e){return e.data[0]}))}(e).then((function(e){e&&s("http://s.ppy.sh/a/"+e.user_id)}))};return Object(d.jsxs)("div",{className:"user-box",children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{name:"user",type:"text",onKeyDown:function(e){"Enter"===e.key&&c(e.target.value)},onBlur:function(e){return c(e.target.value)}})}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{className:"user-image",src:a,alt:"user pfp"})})]})},p=function(){var e=Object(j.a)(Array(4).keys()).map((function(e){return Object(d.jsx)(b,{},e)}));return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Usernames"}),Object(d.jsx)("div",{children:e})]})},h=a(5),f=a(6),O=a(11),v=a(9),x=a(7),g=(a(22),function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"data-header",children:this.props.name}),Object(d.jsx)("div",{className:"data-value",children:this.props.value})]})}}]),a}(s.a.Component)),k=function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var s=e.score,c=[],r=parseInt(s.countgeki),i=parseInt(s.count300),u=parseInt(s.countkatu),o=parseInt(s.count100),j=parseInt(s.count50),l=parseInt(s.countmiss),m=0;"0"===e.mode?(m=(50*j+100*o+300*i)/(300*(l+j+o+i)),c=[Object(d.jsx)(g,{name:"300",value:i},0),Object(d.jsx)(g,{name:"100",value:o},1),Object(d.jsx)(g,{name:"50",value:j},2),Object(d.jsx)(g,{name:"Miss",value:l},3)]):"1"===e.mode?(m=(.5*o+i)/(l+o+i),c=[Object(d.jsx)(g,{name:"Great",value:i},0),Object(d.jsx)(g,{name:"Good",value:o},1),Object(d.jsx)(g,{name:"Miss",value:l},2)]):"2"===e.mode?(m=(j+o+i)/(l+u+j+o+i),c=[Object(d.jsx)(g,{name:"Fruits",value:i},0),Object(d.jsx)(g,{name:"Ticks",value:o},1),Object(d.jsx)(g,{name:"Drop Miss",value:u},2),Object(d.jsx)(g,{name:"Miss",value:l},3)]):"3"===e.mode&&(m=(50*j+100*o+200*u+300*(i+r))/(300*(l+j+o+u+i+r)),c=[Object(d.jsx)(g,{name:"MAX",value:r},0),Object(d.jsx)(g,{name:"300",value:i},1),Object(d.jsx)(g,{name:"200",value:u},2),Object(d.jsx)(g,{name:"100",value:o},3),Object(d.jsx)(g,{name:"50",value:j},4),Object(d.jsx)(g,{name:"Miss",value:l},5)]),s.acc=(100*m).toFixed(2);var b=parseInt(s.enabled_mods);if(s.mods=[],0!==b){["NF","EZ","TD","HD","HR","SD","DT","RX","HT","NC","FL","AT","SO","AP","PF"].forEach((function(e,t){1===(b>>>t&1)&&s.mods.push(e)}))}return s.mods.includes("DT")&&s.mods.includes("NC")&&s.mods.splice(s.mods.indexOf("DT"),1),s.mods.includes("SD")&&s.mods.includes("PF")&&s.mods.splice(s.mods.indexOf("SD"),1),n.state={data:c},n}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.score,t=null;return this.props.rank&&(t=Object(d.jsx)("div",{className:"card-rank",children:Object(d.jsx)("span",{children:e.rank.replace("H","")})})),Object(d.jsxs)("div",{className:"card card-"+(t?"3":"2"),children:[t,Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"card-score",children:e.score}),Object(d.jsx)("div",{className:"card-username",children:e.username}),Object(d.jsx)("div",{children:e.mods.map((function(e){return Object(d.jsx)("img",{className:"card-mod",src:"/osv/mods/"+e+".png",alt:e},e)}))})]}),Object(d.jsxs)("div",{className:"card-data",children:[Object(d.jsxs)("div",{className:"card-row",children:[Object(d.jsx)(g,{name:"Accuracy",value:e.acc},0),Object(d.jsx)(g,{name:"Max Combo",value:e.maxcombo+("1"===e.perfect?" (FC)":"")},1),Object(d.jsx)(g,{name:"PP",value:"number"===typeof e.pp?Math.round(e.pp):e.pp},2)]}),Object(d.jsx)("div",{className:"card-row",children:this.state.data})]})]})}}]),a}(s.a.Component),y=function(){return Object(d.jsxs)("div",{className:"card card-2",children:[Object(d.jsx)("div",{className:"card-rank",children:"?"}),Object(d.jsx)("div",{className:"card-score",children:"No score found"})]})},N=function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.beatmap,a=this.props.scores.length>0?Object(d.jsx)("div",{children:this.props.scores.filter((function(e){return null!=e})).sort((function(e,t){return t.score-e.score})).map((function(a,n){return Object(d.jsx)(k,{rank:e.props.rank,score:a,mode:t.mode},n)}))}):Object(d.jsx)(y,{});return Object(d.jsxs)("div",{className:"deck",children:[Object(d.jsxs)("div",{className:"beatmap",style:{backgroundImage:"url(https://assets.ppy.sh/beatmaps/"+t.beatmapset_id+"/covers/cover.jpg)"},children:[Object(d.jsx)("div",{className:"beatmap-title",children:t.title}),Object(d.jsx)("div",{className:"beatmap-version",children:t.version}),Object(d.jsx)("div",{className:"beatmap-sr",children:t.difficultyrating})]}),a]})}}]),a}(s.a.Component),_="6e85fdaab213f9622e86be94c75bc3d7b85dfa7b",F=function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={decks:[]},n.create_decks=n.create_decks.bind(Object(O.a)(n)),n.from_beatmaps=n.from_beatmaps.bind(Object(O.a)(n)),n}return Object(f.a)(a,[{key:"get_mods",value:function(){var e=-1,t=document.querySelectorAll('input[type="checkbox"]:checked');return t.length>0&&(e=0),t.forEach((function(t){return e+=parseInt(t.value)})),e}},{key:"from_beatmaps",value:function(e,t){var a=this,n=this.get_mods(),s=t.map((function(e){var t=e.split("/").splice(4),a=t[0].split("#")[1];a=["osu","taiko","fruits","mania"].indexOf(a);var n=t[1];return o.a.get("https://osu.ppy.sh/api/get_beatmaps",{params:{k:_,b:n,m:a}})}));o.a.all(s).then((function(t){t.forEach((function(t){var s=t.data[0];if(s.difficultyrating=parseFloat(s.difficultyrating).toFixed(2),0===e.length)o.a.get("https://osu.ppy.sh/api/get_scores",{params:{k:_,b:s.beatmap_id,m:s.mode,mods:n,limit:3}}).then((function(e){a.setState({decks:[].concat(Object(j.a)(a.state.decks),[Object(d.jsx)(N,{beatmap:s,scores:e.data,rank:!0})])})}));else{var c=e.map((function(e){return o.a.get("https://osu.ppy.sh/api/get_scores",{params:{k:_,b:s.beatmap_id,m:s.mode,u:e,type:"string",mods:n}})}));o.a.all(c).then((function(e){var t=[];e.forEach((function(e){return e.data.forEach((function(e){return t.push(e)}))}));var n=Object(d.jsx)(N,{beatmap:s,scores:t,rank:!0});a.setState({decks:[].concat(Object(j.a)(a.state.decks),[n])})}))}}))}))}},{key:"from_multiplayer",value:function(e,t){var a=this;t=t.map((function(e){return e.toLowerCase()}));var n=e.split("/").slice(-1)[0];o.a.get("https://osu.ppy.sh/api/get_match",{params:{k:_,mp:n}}).then((function(e){var n=e.data,s={};n.games.forEach((function(e){return e.scores.forEach((function(e){s[e.user_id]=""}))}));var c=Object.keys(s).map((function(e){return o.a.get("https://osu.ppy.sh/api/get_user",{params:{k:_,u:e,type:"id"}})}));o.a.all(c).then((function(e){e.forEach((function(e){var t=e.data[0];s[t.user_id]=t.username})),n.games.forEach((function(e){var n=e.scores;n.forEach((function(t){t.username=s[t.user_id],"0"!==e.mods&&(t.enabled_mods=parseInt(e.mods)),t.pp="-"})),(n=n.map((function(e){return 0===t.length||t.includes(e.username.toLowerCase())?e:null}))).every((function(e){return null===e}))||o.a.get("https://osu.ppy.sh/api/get_beatmaps",{params:{k:_,b:e.beatmap_id,m:e.play_mode}}).then((function(e){var t=e.data[0];t.difficultyrating=parseFloat(t.difficultyrating).toFixed(2),a.setState({decks:[].concat(Object(j.a)(a.state.decks),[Object(d.jsx)(N,{beatmap:t,scores:n,rank:!1})])})})).catch((function(e){}))}))}))}))}},{key:"create_decks",value:function(e){this.setState({decks:[]});var t=document.getElementById("mp").value,a=Array.from(document.getElementsByName("beatmap")).map((function(e){return e.value})).filter((function(e){return""!==e})),n=Array.from(document.getElementsByName("user")).map((function(e){return e.value})).filter((function(e){return""!==e}));if(""===t){if(0===a.length)return;this.from_beatmaps(n,a)}else this.from_multiplayer(t,n)}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{className:"view",onClick:this.create_decks,children:"View"}),this.state.decks.map((function(e,t){return Object(d.jsx)("span",{children:e},t)}))]})}}]),a}(s.a.Component),E=(a(48),function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],s=t[1],c=function(e){var t=e.split("/").slice(-1)[0];o.a.get("https://osu.ppy.sh/api/get_match",{params:{k:"6e85fdaab213f9622e86be94c75bc3d7b85dfa7b",mp:t}}).then((function(e){var t=e.data;s(t.match.name)})).catch((function(e){s("Multyplayer not found")}))};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Multiplayer link"}),Object(d.jsx)("input",{id:"mp",type:"text",className:"size",onKeyDown:function(e){"Enter"===e.key&&c(e.target.value)},onBlur:function(e){return c(e.target.value)}}),Object(d.jsx)("h2",{children:a})]})}),C=function(){return Object(d.jsx)("ul",{className:"mods",children:Object.entries({NM:0,NF:1,EZ:2,HT:256,HR:16,SD:32,PF:16416,DT:64,NC:576,HD:8,FL:1024,SO:4096}).map((function(e,t){var a=Object(i.a)(e,2),n=a[0],s=a[1];return Object(d.jsxs)("li",{children:[Object(d.jsx)("input",{type:"checkbox",id:"m"+t,value:s}),Object(d.jsxs)("label",{className:"label-mod",htmlFor:"m"+t,children:[Object(d.jsx)("img",{src:"/osv/mods/"+n+".png",alt:n})," "]})]},t)}))})},S=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{}),Object(d.jsx)(p,{}),Object(d.jsx)(C,{})]})},D=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Osu Score Viewer"}),Object(d.jsx)(E,{}),Object(d.jsx)("h4",{className:"line",children:Object(d.jsx)("span",{children:"or"})}),Object(d.jsx)(S,{}),Object(d.jsx)(F,{})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,50)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(D,{})}),document.getElementById("root")),I()}},[[49,1,2]]]);
//# sourceMappingURL=main.72d2fa76.chunk.js.map