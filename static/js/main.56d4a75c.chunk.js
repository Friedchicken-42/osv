(this.webpackJsonposv=this.webpackJsonposv||[]).push([[0],{22:function(e,t,a){},28:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(23),r=a.n(c),i=(a(28),a(8)),u=a(2),o=a.n(u),j=a(4),l=a(0),d=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("input",{name:"beatmap",type:"text",className:"size"})})},m=function(){var e=Object(s.useState)([Object(l.jsx)(d,{},"0")]),t=Object(i.a)(e,2),a=t[0],n=t[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Beatmap link"}),a,Object(l.jsx)("button",{className:"btn",onClick:function(e){return n([].concat(Object(j.a)(a),[Object(l.jsx)(d,{},a.length)]))},children:"+"}),Object(l.jsx)("button",{className:"btn",onClick:function(e){a.length>1&&n(a.slice(0,a.length-1))},children:"-"})]})},b=function(){var e=Object(s.useState)("/osv/avatar-guest.png"),t=Object(i.a)(e,2),a=t[0],n=t[1],c=function(e){""===e?n("/osv/avatar-guest.png"):function(e){return o.a.get("https://osu.ppy.sh/api/get_user",{params:{k:"6e85fdaab213f9622e86be94c75bc3d7b85dfa7b",u:e,type:"string"}}).then((function(e){return e.data[0]}))}(e).then((function(e){e&&n("http://s.ppy.sh/a/"+e.user_id)}))};return Object(l.jsxs)("div",{className:"user-box",children:[Object(l.jsx)("div",{children:Object(l.jsx)("input",{name:"user",type:"text",onKeyDown:function(e){"Enter"===e.key&&c(e.target.value)},onBlur:function(e){return c(e.target.value)}})}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{children:Object(l.jsx)("img",{className:"user-image",src:a,alt:"user pfp"})})]})},p=function(){var e=Object(j.a)(Array(4).keys()).map((function(e){return Object(l.jsx)(b,{},e)}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Usernames"}),Object(l.jsx)("div",{children:e})]})},h=a(5),f=a(6),O=a(11),v=a(9),x=a(7),g=(a(22),function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=isNaN(this.props.value)?0:this.props.value;return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"data-header",children:this.props.name}),Object(l.jsx)("div",{className:"data-value",children:e})]})}}]),a}(n.a.Component)),k=function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(e){var s;Object(h.a)(this,a),s=t.call(this,e);var n=e.score,c=[],r=parseInt(n.countgeki),i=parseInt(n.count300),u=parseInt(n.countkatu),o=parseInt(n.count100),j=parseInt(n.count50),d=parseInt(n.countmiss),m=0;"0"===e.mode?(m=(50*j+100*o+300*i)/(300*(d+j+o+i)),c=[Object(l.jsx)(g,{name:"300",value:i},0),Object(l.jsx)(g,{name:"100",value:o},1),Object(l.jsx)(g,{name:"50",value:j},2),Object(l.jsx)(g,{name:"Miss",value:d},3)]):"1"===e.mode?(m=(.5*o+i)/(d+o+i),c=[Object(l.jsx)(g,{name:"Great",value:i},0),Object(l.jsx)(g,{name:"Good",value:o},1),Object(l.jsx)(g,{name:"Miss",value:d},2)]):"2"===e.mode?(m=(j+o+i)/(d+u+j+o+i),c=[Object(l.jsx)(g,{name:"Fruits",value:i},0),Object(l.jsx)(g,{name:"Ticks",value:o},1),Object(l.jsx)(g,{name:"Drop Miss",value:u},2),Object(l.jsx)(g,{name:"Miss",value:d},3)]):"3"===e.mode&&(m=(50*j+100*o+200*u+300*(i+r))/(300*(d+j+o+u+i+r)),c=[Object(l.jsx)(g,{name:"MAX",value:r},0),Object(l.jsx)(g,{name:"300",value:i},1),Object(l.jsx)(g,{name:"200",value:u},2),Object(l.jsx)(g,{name:"100",value:o},3),Object(l.jsx)(g,{name:"50",value:j},4),Object(l.jsx)(g,{name:"Miss",value:d},5)]),n.acc=(100*m).toFixed(2);var b=parseInt(n.enabled_mods);if(n.mods=[],0!==b){["NF","EZ","TD","HD","HR","SD","DT","RX","HT","NC","FL","AT","SO","AP","PF"].forEach((function(e,t){1===(b>>>t&1)&&n.mods.push(e)}))}return n.mods.includes("DT")&&n.mods.includes("NC")&&n.mods.splice(n.mods.indexOf("DT"),1),n.mods.includes("SD")&&n.mods.includes("PF")&&n.mods.splice(n.mods.indexOf("SD"),1),s.state={data:c},s}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.score,t=null;return this.props.rank&&(t=Object(l.jsx)("div",{className:"card-rank",children:Object(l.jsx)("span",{children:e.rank.replace("H","")})})),Object(l.jsxs)("div",{className:"card card-"+(t?"3":"2"),children:[t,Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"card-score",children:e.score}),Object(l.jsx)("div",{className:"card-username",children:e.username}),Object(l.jsx)("div",{children:e.mods.map((function(e){return Object(l.jsx)("img",{className:"card-mod",src:"/osv/mods/"+e+".png",alt:e},e)}))})]}),Object(l.jsxs)("div",{className:"card-data",children:[Object(l.jsxs)("div",{className:"card-row",children:[Object(l.jsx)(g,{name:"Accuracy",value:e.acc},0),Object(l.jsx)(g,{name:"Max Combo",value:e.maxcombo},1),Object(l.jsx)(g,{name:"PP",value:Math.round(e.pp)},2)]}),Object(l.jsx)("div",{className:"card-row",children:this.state.data})]})]})}}]),a}(n.a.Component),y=function(){return Object(l.jsxs)("div",{className:"card card-2",children:[Object(l.jsx)("div",{className:"card-rank",children:"?"}),Object(l.jsx)("div",{className:"card-score",children:"No score found"})]})},N=function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props.beatmap,a=this.props.scores.length>0?Object(l.jsx)("div",{children:this.props.scores.filter((function(e){return null!=e})).sort((function(e,t){return t.score-e.score})).map((function(a,s){return Object(l.jsx)(k,{rank:e.props.rank,score:a,mode:t.mode},s)}))}):Object(l.jsx)(y,{});return Object(l.jsxs)("div",{className:"deck",children:[Object(l.jsxs)("div",{className:"beatmap",style:{backgroundImage:"url(https://assets.ppy.sh/beatmaps/"+t.beatmapset_id+"/covers/cover.jpg)"},children:[Object(l.jsx)("div",{className:"beatmap-title",children:t.title}),Object(l.jsx)("div",{className:"beatmap-version",children:t.version}),Object(l.jsx)("div",{className:"beatmap-sr",children:t.difficultyrating})]}),a]})}}]),a}(n.a.Component),_="6e85fdaab213f9622e86be94c75bc3d7b85dfa7b",E=function(e){Object(v.a)(a,e);var t=Object(x.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).state={decks:[]},s.create_decks=s.create_decks.bind(Object(O.a)(s)),s.from_beatmaps=s.from_beatmaps.bind(Object(O.a)(s)),s}return Object(f.a)(a,[{key:"get_mods",value:function(){var e=-1,t=document.querySelectorAll('input[type="checkbox"]:checked');return t.length>0&&(e=0),t.forEach((function(t){return e+=parseInt(t.value)})),e}},{key:"from_beatmaps",value:function(e,t){var a=this,s=this.get_mods(),n=t.map((function(e){var t=e.split("/").splice(4),a=t[0].split("#")[1];a=["osu","taiko","fruits","mania"].indexOf(a);var s=t[1];return o.a.get("https://osu.ppy.sh/api/get_beatmaps",{params:{k:_,b:s,m:a}})}));o.a.all(n).then((function(t){t.forEach((function(t){var n=t.data[0];if(n.difficultyrating=parseFloat(n.difficultyrating).toFixed(2),0===e.length)o.a.get("https://osu.ppy.sh/api/get_scores",{params:{k:_,b:n.beatmap_id,m:n.mode,mods:s,limit:3}}).then((function(e){a.setState({decks:[].concat(Object(j.a)(a.state.decks),[Object(l.jsx)(N,{beatmap:n,scores:e.data,rank:!0})])})}));else{var c=e.map((function(e){return o.a.get("https://osu.ppy.sh/api/get_scores",{params:{k:_,b:n.beatmap_id,m:n.mode,u:e,type:"string",mods:s}})}));o.a.all(c).then((function(e){var t=[];e.forEach((function(e){return e.data.forEach((function(e){return t.push(e)}))}));var s=Object(l.jsx)(N,{beatmap:n,scores:t,rank:!0});a.setState({decks:[].concat(Object(j.a)(a.state.decks),[s])})}))}}))}))}},{key:"from_multiplayer",value:function(e,t){var a=this;t=t.map((function(e){return e.toLowerCase()}));var s=e.split("/").slice(-1)[0];o.a.get("https://osu.ppy.sh/api/get_match",{params:{k:_,mp:s}}).then((function(e){var s=e.data,n={};s.games.forEach((function(e){return e.scores.forEach((function(e){n[e.user_id]=""}))}));var c=Object.keys(n).map((function(e){return o.a.get("https://osu.ppy.sh/api/get_user",{params:{k:_,u:e,type:"id"}})}));o.a.all(c).then((function(e){e.forEach((function(e){var t=e.data[0];n[t.user_id]=t.username})),s.games.forEach((function(e){var s=e.scores;s.forEach((function(t){t.username=n[t.user_id],"0"!==e.mods&&(t.enabled_mods=parseInt(e.mods))})),(s=s.map((function(e){return 0===t.length||t.includes(e.username.toLowerCase())?e:null}))).every((function(e){return null===e}))||o.a.get("https://osu.ppy.sh/api/get_beatmaps",{params:{k:_,b:e.beatmap_id,m:e.play_mode}}).then((function(e){var t=e.data[0];t.difficultyrating=parseFloat(t.difficultyrating).toFixed(2),a.setState({decks:[].concat(Object(j.a)(a.state.decks),[Object(l.jsx)(N,{beatmap:t,scores:s,rank:!1})])})})).catch((function(e){}))}))}))}))}},{key:"create_decks",value:function(e){this.setState({decks:[]});var t=document.getElementById("mp").value,a=Array.from(document.getElementsByName("beatmap")).map((function(e){return e.value})).filter((function(e){return""!==e})),s=Array.from(document.getElementsByName("user")).map((function(e){return e.value})).filter((function(e){return""!==e}));if(""===t){if(0===a.length)return;this.from_beatmaps(s,a)}else this.from_multiplayer(t,s)}},{key:"render",value:function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"view",onClick:this.create_decks,children:"View"}),this.state.decks.map((function(e,t){return Object(l.jsx)("span",{children:e},t)}))]})}}]),a}(n.a.Component),F=(a(48),function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],c=function(e){var t=e.split("/").slice(-1)[0];o.a.get("https://osu.ppy.sh/api/get_match",{params:{k:"6e85fdaab213f9622e86be94c75bc3d7b85dfa7b",mp:t}}).then((function(e){var t=e.data;n(t.match.name)})).catch((function(e){n("Multyplayer not found")}))};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Multiplayer link"}),Object(l.jsx)("input",{id:"mp",type:"text",className:"size",onKeyDown:function(e){"Enter"===e.key&&c(e.target.value)},onBlur:function(e){return c(e.target.value)}}),Object(l.jsx)("h2",{children:a})]})}),S=function(){return Object(l.jsx)("ul",{className:"mods",children:Object.entries({NM:0,NF:1,EZ:2,HT:256,HR:16,SD:32,PF:16416,DT:64,NC:576,HD:8,FL:1024,SO:4096}).map((function(e,t){var a=Object(i.a)(e,2),s=a[0],n=a[1];return Object(l.jsxs)("li",{children:[Object(l.jsx)("input",{type:"checkbox",id:"m"+t,value:n}),Object(l.jsxs)("label",{className:"label-mod",htmlFor:"m"+t,children:[Object(l.jsx)("img",{src:"/osv/mods/"+s+".png",alt:s})," "]})]},t)}))})},C=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(m,{}),Object(l.jsx)(p,{}),Object(l.jsx)(S,{})]})},D=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Osu Score Viewer"}),Object(l.jsx)(F,{}),Object(l.jsx)("h4",{className:"line",children:Object(l.jsx)("span",{children:"or"})}),Object(l.jsx)(C,{}),Object(l.jsx)(E,{})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,50)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(D,{})}),document.getElementById("root")),I()}},[[49,1,2]]]);
//# sourceMappingURL=main.56d4a75c.chunk.js.map